<div class="flex flex-col text-neutral-1-900">
    <div class="flex items-center justify-between bg-white">
        <div>
            <tds-page-header title="Tạo mã giảm giá">
                <tds-breadcrumb tds-page-header-breadcrumb>
                    <tds-breadcrumb-item>Khuyến mãi</tds-breadcrumb-item>
                    <tds-breadcrumb-item>
                        <a>Mã giảm giá</a>
                    </tds-breadcrumb-item>
                    <tds-breadcrumb-item>
                        <a>Tạo mã giảm giá</a>
                    </tds-breadcrumb-item>
                    <!-- <tds-breadcrumb-item>Third-level Menu</tds-breadcrumb-item> -->
                </tds-breadcrumb>
            </tds-page-header>
        </div>
        <div class="pr-4">
            <button tds-button size="sm" color="primary" class="mr-2"><i
                    class="tdsi-save-fill text-white mr-2"></i>Lưu</button>
            <button (click)="closeCreateDiscountCode()" tds-button size="sm" color="secondary">Đóng</button>
        </div>
    </div>
    <div class="bg-light-50 p-4">
        <div class="flex">
            <div class="w-3/5">
                <div class="border rounded-md bg-white">
                    <div class="p-4 text-header-1 font-semibold border-b">
                        <h1>Thông tin</h1>
                    </div>
                    <div class="p-4 text-body-2 font-medium">
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <div class="w-2/5">
                                    <h1>Tên mã giảm giá<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-3/5">
                                    <tds-form-field>
                                        <input tdsInput placeholder="Nhập tên mã giảm giá" size="sm" />
                                    </tds-form-field>
                                </div>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Loại giảm giá<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">Theo số tiền</label>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">Theo Phần trăm</label>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <div class="w-2/5">
                                    <h1>Mã giảm giá<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-3/5">
                                    <tds-form-field>
                                        <input tdsInput placeholder="Từ 5 - 10 ký tự thường và chữ số." size="sm" />
                                    </tds-form-field>
                                </div>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Nhập phần trăm<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-2/3">
                                    <tds-form-field>
                                        <input type="number" tdsInput placeholder="Nhập phần trăm" size="sm" />
                                    </tds-form-field>

                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <div class="w-2/5">
                                    <h1>Hiển thị<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-3/5">
                                    <tds-switch size="md"></tds-switch>
                                </div>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Giới hạn số tiền<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">KHông giới hạn</label>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">Có giới hạn</label>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">

                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Số tiền giới hạn<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-2/3">
                                    <tds-form-field>
                                        <input type="number" tdsInput placeholder="Nhập số tiền" size="sm" />
                                    </tds-form-field>

                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="border rounded-md bg-white mt-4">
                    <div class="p-4 text-header-1 font-semibold border-b">
                        <h1>Điều kiện áp dụng</h1>
                    </div>
                    <div class="p-4 text-body-2 font-medium">
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <div class="w-2/5">
                                    <h1>Nhóm khách hàng<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-3/5">
                                    <tds-form-field>
                                        <tds-select valueField="id" textField="name"
                                            placeholder='Chọn nhóm khách hàng sử dụng'
                                            (ngModelChange)="onModelChange($event)" [allowClear]="true"
                                            [data]="listData">
                                        </tds-select>
                                    </tds-form-field>
                                </div>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Thời gian hiệu lực<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-2/3">
                                    <tds-date-picker showTime></tds-date-picker>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <div class="w-1/3">
                                    <h1>Sản phẩm áp dụng<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">Tất cả sản phẩm</label>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">Sản phẩm cụ thể</label>
                                </div>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Số mã giảm giá<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">Không giói hạn</label>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio size="sm" [ngModel]="true">Giới hạn</label>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <button (click)="showModal()" class="w-full text-primary-1" tds-button size="sm"
                                    color="secondary">Chọn sản phẩm</button>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Giới hạn số lượt<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-2/3">
                                    <tds-form-field>
                                        <input type="number" tdsInput placeholder="Nhập số lượng giới hạn" size="sm" />
                                    </tds-form-field>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <div class="w-1/3">
                                    <h1>Số tiền giới hạn<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio ngModel>Theo số tiền</label>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio ngModel>Theo phần trăm</label>
                                </div>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Số lượt/khách hàng<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio ngModel>Không giới hạn</label>
                                </div>
                                <div class="w-1/3">
                                    <label tds-radio ngModel>Giới hạn</label>
                                </div>
                            </div>
                        </div>
                        <div class="flex items-center w-full py-2">
                            <div class="flex w-1/2 pr-3">
                                <div class="w-1/3">
                                    <h1>Nhập phần trăm<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-2/3">
                                    <tds-form-field>
                                        <input type="number" tdsInput placeholder="Nhập phần trăm" size="sm" />
                                    </tds-form-field>
                                </div>
                            </div>
                            <div class="flex w-1/2 justify-between pl-3">
                                <div class="w-1/3">
                                    <h1>Giới hạn số lượt<span class="text-error-500"> *</span></h1>
                                </div>
                                <div class="w-2/3">
                                    <tds-form-field>
                                        <input type="number" tdsInput placeholder="Nhập số lượng giới hạn" size="sm" />
                                    </tds-form-field>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="w-2/5 ml-4">
                <div class="bg-white border rounded-md">
                    <div class="px-4 py-1 text-neutral-1-900 text-header-1 font-semibold border-b">
                        <h1>Hiển thị điều kiện áp dụng</h1>
                    </div>
                    <div class="flex justify-between w-full p-4">
                        <div class="text-neutral-1-900 text-body-2 font-regular">
                            <h1 class="py-1">Tên mã giảm giá</h1>
                            <h1 class="py-1">Mã giảm giá</h1>
                            <h1 class="py-1">Áp dụng cho</h1>
                            <h1 class="py-1">Nhóm khách hàng áp dụng</h1>
                            <h1 class="py-1">Giá trị đơn tối thiểu</h1>
                            <h1 class="py-1">Giới hạn sử dụng tối đa</h1>
                            <h1 class="py-1">Giới hạn sử dụng mỗi khách hàng</h1>
                            <h1 class="py-1">Mã giảm giá trong [Trang Chi Tiết Sản Phẩm]</h1>
                            <h1 class="py-1">Thời gian hiệu lực</h1>
                        </div>
                        <div class="text-primary-1 text-body-2 font-medium text-right">
                            <h1 class="py-1">Deal sốc 1 tháng 1 lần</h1>
                            <h1 class="py-1">GG2021</h1>
                            <h1 class="py-1">Tất cả sản phẩm</h1>
                            <h1 class="py-1">Tất cả khách hàng</h1>
                            <h1 class="py-1">200.000đ</h1>
                            <h1 class="py-1">20</h1>
                            <h1 class="py-1">1</h1>
                            <h1 class="py-1">Hiện</h1>
                            <h1 class="py-1">20/10/2021 - 20/11/2021</h1>
                        </div>
                    </div>
                </div>
                <div class="bg-white border rounded-md mt-4">
                    <div class="p-4 text-header-1 font-semibold border-b text-neutral-1-900">
                        <h1>Hiển thị trên trang chi tiết sản phẩm (Mobile)</h1>
                    </div>
                    <div class="p-4">
                        <div class="bg-neutral-3-50 flex items-center justify-center p-4">
                            <div class="flex flex-col bg-neutral-3-50">
                                <div class="rounded-xl bg-white">
                                    <div
                                        class="py-1 flex justify-center text-title-1 font-medium text-white items-center bg-primary-1 rounded-tr-xl rounded-tl-xl">
                                        <h1>Giảm 10k</h1>
                                    </div>
                                    <div class="flex flex-col justify-between items-center p-3">
                                        <div class="text-caption-2 font-regular text-black mb-3">
                                            <h1>Cho đơn hàng từ 200k</h1>
                                        </div>
                                        <div class="text-info-500 tdsi-info-line"></div>
                                    </div>
                                </div>
                                <div
                                    class="flex justify-center items-center border-t border-dotted rounded-xl bg-white">
                                    <div class="text-caption-2 font-regular text-primary-1 py-1">
                                        <button class="w-full" tds-flat-button size="sm">Lưu</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- modal -->
<tds-modal size="lg" [(visible)]="isVisible" [title]="modalTitle" [content]="modalContent" [footer]="modalFooter"
    (onCancel)="handleCancel()">

    <ng-template #modalTitle>Chọn sản phẩm</ng-template>

    <ng-template #modalContent>
        <div class="w-full">
            <div class="w-full flex justify-between items-center">
                <div>
                    <tds-filter-status [ngModel]='1' (selectChange)="onSelectChange($event)">
                        <tds-filter-status-item name='Tất cả' [value]='1'>

                        </tds-filter-status-item>
                        <tds-filter-status-item name='Đã chọn' [value]='2' [count]='2'>

                        </tds-filter-status-item>
                    </tds-filter-status>
                </div>
                <div class="flex">
                    <tds-form-field class="mr-2">
                        <tds-select valueField="id" textField="name" placeholder='Chọn danh mục' [(ngModel)]="selected"
                            (ngModelChange)="onModelChange($event)" [allowClear]="true" [data]="listData1">
                        </tds-select>
                    </tds-form-field>
                    <tds-form-field>
                        <input autocomplete="off" tdsInput placeholder="Tìm kiếm" [required]='true' />
                        <span tdsPrefix><i class="tdsi-search-fill"></i></span>
                    </tds-form-field>
                </div>
            </div>
            <div>
                <tds-table #rowSelectionTable showSizeChanger [listData]="listOfData"
                    (currentPageDataChange)="onCurrentPageDataChange($event)">
                    <thead>
                        <tr>
                            <th class="w-24" [selections]="listOfSelection" [(checked)]="checked"
                                [indeterminate]="indeterminate" (checkedChange)="onAllChecked($event)">
                            </th>
                            <th>Ảnh</th>
                            <th>Mã sản phẩm</th>
                            <th>Tên sản phẩm</th>
                            <th>Đánh giá</th>
                            <th>Giá bán</th>
                            <th>Kho hàng</th>
                        </tr>
                    </thead>
                    <tbody>
                        <ng-template ngFor let-data [ngForOf]="rowSelectionTable.data" let-odd='odd'>
                            <tr>
                                <td [checked]="setOfCheckedId.has(data.id)"
                                    (checkedChange)="onItemChecked(data.id, $event)"></td>
                                <td>
                                    <div>
                                        <img src="{{data.image}}" alt="">
                                    </div>
                                </td>
                                <td>{{data.productCode}}</td>
                                <td>{{data.productName}}</td>
                                <td>{{data.evaluate}} <i class="tdsi-star-1-fill text-warning-500"></i></td>
                                <td>{{data.price}}</td>
                                <td>{{data.wareHouse}}</td>
                            </tr>
                        </ng-template>
                    </tbody>
                </tds-table>
            </div>
        </div>
    </ng-template>

    <ng-template #modalFooter>
        <div class="p-4 w-full flex justify-end items-center">
            <div class="flex justify-end">
                <button class="mr-2" tds-button color="secondary" (click)="handleCancel()">
                    Hủy
                </button>
                <button tds-button color="primary" (click)="handleOk()">
                    Xác nhận
                </button>
            </div>
        </div>
    </ng-template>

</tds-modal>